[mysqld]

# Memory
innodb_buffer_pool_size = 2G
innodb_buffer_pool_instances = 2
innodb_flush_method = O_DIRECT

# IO
innodb_io_capacity = 800
innodb_io_capacity_max = 2000

# Durability (safe defaults)
innodb_flush_log_at_trx_commit = 1
sync_binlog = 1

# Connections
max_connections = 300
thread_cache_size = 100

# Tables and name resolution
table_open_cache = 8000
skip_name_resolve = ON

# Optional observability (enable temporarily when investigating)
# slow_query_log = ON
# long_query_time = 2

# Optional: during Matomo maintenance windows only (revert after)
# innodb_flush_log_at_trx_commit = 2
# sync_binlog = 100
